<!DOCTYPE html>
<html>

<head>
  <%- include('../partials/head'); %>
    <script>
      var post = JSON.parse('<%- JSON.stringify(post) %>');
    </script>
    <script src="/javascripts/tslGMapUtil.js"></script>
    <script src="/javascripts/prepareGMap.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
</head>

<body>
  <div class="flex flex-col min-h-screen max-h-screen">
    <%- include('../partials/header'); %>
      <!-- Main Body -->
      <div class="grow overflow-y-scroll">
        <hr />
        <img width="100%" height="80px" src="<%= post.imageUrl %>" style="border: 1px solid; " />
        <div class="p-2">
          <div style="display:flex; justify-content:space-between;">
            <div style="display:flex;">
              <img width="40px" height="40px" src="<%= post.user.iconUrl %>"
                style="border: 2px solid #ff0099; border-radius:50%" />
              <span style="font-weight:bold; font-family:Kaisai Decol; color:#ff0099; padding-left:10px;">
                <%= post.user.userName %>
              </span>
            </div>
            <span style="font-size: small; margin-left:20px;">
              <%= post.insertDate.toLocaleString("ja-JP") %>
            </span>
          </div>
          <p>
            <%= post.title %>
          </p>
        </div>
        <!-- Main Body -->
        <div id="map" style="flex-grow: 1;" class="w-[80%] h-[200px]"></div>
        <% for (const comment of post.postComments) { %>
          <hr />
          <div class="w-full px-4 py-2">
            <div style="display:flex; justify-content:space-between;">
              <div style="display:flex;">
                <img width="40px" height="40px" src="<%= comment.user.iconUrl %>"
                  style="border: 2px solid #ff0099; border-radius:50%" />
                <span style="font-weight:bold; font-family:Kaisai Decol; color:#ff0099; padding-left:10px;">
                  <%= comment.user.userName %>
                </span>
              </div>
              <span style="font-size: small; margin-left:20px;">
                <%= comment.commentDate.toLocaleString("ja-JP") %>
              </span>
            </div>
            <p class="w-full break-words">
              <%= comment.comment %>
            </p>
          </div>
          <% } %>
      </div>
      <%- include('../partials/footer', {currentMenu: 2}); %>
  </div>
</body>

</html>