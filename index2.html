<html>

<head>
  <title>Default Advanced Marker</title>
  <script src="./doNotGitPush.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

  <link rel="stylesheet" type="text/css" href="./style.css" />
  <script type="module" src="./index.js"></script>
  <style>
    /* 
      * Always set the map height explicitly to define the size of the div element
      * that contains the map. 
      */
    #map {
      height: 90%;
    }

    /* 
      * Optional: Makes the sample page fill the window. 
      */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
</head>

<body>
  <div id="map"></div>

  <!-- The Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Menu Bar -->
  <div style="position: absolute; bottom: 0; width: 100%;">
    <div style="display: flex; justify-content: space-around;">
      <span style="text-align: center;">
        <a class="nav-link active" aria-current="page" href="#">
          <span class="material-symbols-outlined">
            bigtop_updates
          </span>
          <p>新着</p>
        </a>
      </span>
      <span style="text-align: center;">
        <a class="nav-link active" aria-current="page" href="#">
          <span class="material-symbols-outlined">
            local_activity
          </span>
          <p>イベント</p>
        </a>
      </span>
      <span style="text-align: center;">
        <a class="nav-link active" aria-current="page" href="#">
          <span class="material-symbols-outlined">
            map
          </span>
          <p>地図</p>
        </a>
      </span>
      <span style="text-align: center;">
        <a class="nav-link active" aria-current="page" href="#">
          <span class="material-symbols-outlined">
            diversity_1
          </span>
          <p>コミュニティ</p>
        </a>
      </span>
      <span style="text-align: center;">
        <a class="nav-link active" aria-current="page" href="#">
          <span class="material-symbols-outlined">
            language
          </span>
          <p>About</p>
        </a>
      </span>
    </div>
  </div>

  <!-- prettier-ignore -->
  <script>(g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })
      ({ key: GMAP_KEY, v: "weekly" });

    async function initMap() {
      // Request needed libraries.
      const { Map } = await google.maps.importLibrary("maps");
      const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
      const map = new Map(document.getElementById("map"), {
        center: { lat: 35.6812405, lng: 139.7645499 },
        zoom: 13,
        mapId: "4504f8b37365c3d0",
      });

      const contentString1 =
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h4 id="firstHeading" class="firstHeading">東京駅</h1>' +
        '<div id="bodyContent">' +
        "<img src='https://media.timeout.com/images/105544832/1372/772/image.webp' width='200px' />" +
        "<p>2023/12/01</p>" +
        "<p>ここが東京駅です！</p>" +
        "</div>" +
        "</div>";
        const contentString2 =
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h4 id="firstHeading" class="firstHeading">新宿御苑</h1>' +
        '<div id="bodyContent">' +
        "<img src='https://s3-ap-northeast-1.amazonaws.com/thegate/2021/04/14/11/31/14/shinjukugyoen.jpg' width='200px' />" +
        "<p>2023/12/01</p>" +
        "<p>紅葉が見頃です〜。</p>" +
        "</div>" +
        "</div>";

      const infowindow1 = new google.maps.InfoWindow({
        content: contentString1,
        ariaLabel: "Uluru",
      });
      const infowindow2 = new google.maps.InfoWindow({
        content: contentString2,
        ariaLabel: "新宿御苑",
      });

      const marker1 = new AdvancedMarkerElement({
        map,
        position: { lat: 35.6812405, lng: 139.7645499 },
      });
      const marker2 = new AdvancedMarkerElement({
        map,
        position: { lat: 35.6851806, lng: 139.7074714 },
      });
      // marker.setAttribute("data-bs-toggle", "modal");
      // marker.setAttribute("data-bs-target", "#exampleModal");

      // marker.setAttribute("data-toggle", "modal");
      // marker.setAttribute("data-target", "#exampleModal");
      marker1.addListener('click', function () {
        infowindow1.open({
          anchor: marker1,
          map,
        });
      });
      marker2.addListener('click', function () {
        //alert('東京駅ですよ');
        infowindow2.open({
          anchor: marker2,
          map,
        });
      });
    }

    initMap();
  </script>
</body>

</html>